{% extends "base.html" %}

{% block content %}
<h2>Dashboard</h2>
<p>Welcome, {{ user.username }}! (Role: {{ user.role }})</p>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
    {% endif %}
{% endwith %}

{% if user.role == 'manager' %}
    <h3>Manage Users</h3>
    <ul>
        {% for user in users %}
            {% if user.username != 'admin' %}
                <li>{{ user.username }} ({{ user.role }})
                    <form action="{{ url_for('Novel_login.delete_user', username=user.username) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
                    </form>
                </li>
            {% else %}
                <li>{{ user.username }} ({{ user.role }}) - Admin</li>
            {% endif %}
        {% endfor %}
    </ul>
    <a href="{{ url_for('Novel_login.add_user') }}">Add New User</a>
{% endif %}

{% if user.role == 'cashier' %}
    <a href="{{ url_for('Novel_POS.process_sale') }}">Process Sale</a>
{% endif %}

<!-- Navigation Links -->
<div class="nav-links">
    <a href="{{ url_for('Novel_inventory.inventory') }}">Inventory</a>
    <a href="{{ url_for('Novel_cart.view_cart') }}" class="cart-link">ðŸ›’ My Cart</a>

    <a href="{{ url_for('Novel_login.logout') }}">Logout</a>
</div>

<style>
    /* Style to align links horizontally */
    .nav-links {
        margin-top: 15px;
    }
    .nav-links a {
        margin-right: 15px;
        font-weight: bold;
        text-decoration: none;
        color: #007bff;
    }
    .nav-links a:hover {
        color: #0056b3;
        text-decoration: underline;
    }
</style>

{% endblock %}
